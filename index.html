<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>ç…‰è—¥æ¨¡æ“¬å™¨</title>
  <script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-firestore.js"></script>
  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    // ğŸ”¥ Firebase è¨­å®š
    const firebaseConfig = {
      apiKey: "AIzaSyBEgS2lZYqSrr1FV5X0EzfrRQq_C4D1-Tc",
      authDomain: "alchemygame-37ea5.firebaseapp.com",
      projectId: "alchemygame-37ea5",
      storageBucket: "alchemygame-37ea5.appspot.com",
      messagingSenderId: "149160496683",
      appId: "1:149160496683:web:2ef9826985a4bd3f1c646e",
      measurementId: "G-59PLBST54N"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }
    .herb-select {
      margin: 5px 0;
    }
    #player {
      display: none; /* éš±è—æ’­æ”¾å™¨ç•«é¢ */
    }
    #musicControl {
      margin-top: 20px;
      padding: 6px 12px;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <h1>ğŸ”¥ ç…‰è—¥æ¨¡æ“¬å™¨</h1>

  <!-- ğŸµ YouTube éŸ³æ¨‚æ’­æ”¾å™¨ï¼ˆéš±è—ï¼‰ -->
  <div id="player"></div>
  <button id="musicControl">â¸ æš«åœèƒŒæ™¯éŸ³æ¨‚</button>

  <div>
    <h3>ğŸ” é¸æ“‡è—¥æï¼š</h3>
    <div id="herbList"></div>
  </div>

  <div>
    <h3>ğŸ”¥ ç«å€™é¸æ“‡ï¼š</h3>
    <select id="fireType">
      <option>å°ç«</option>
      <option>ä¸­ç«</option>
      <option>å¤§ç«</option>
      <option>å…ç”¨ç«</option>
    </select>
  </div>

  <button onclick="simulateAlchemy()">é–‹å§‹ç…‰è—¥</button>

  <h3>ğŸ“¦ ç…‰è—¥çµæœï¼š</h3>
  <div id="result"></div>

  <script>
    const herbListDiv = document.getElementById('herbList');

    async function loadHerbs() {
      const snapshot = await db.collection("herbs").get();
      snapshot.forEach(doc => {
        const herb = doc.data();
        const label = document.createElement("label");
        label.innerHTML = `<input type="checkbox" value="${herb.name}" class="herb-select"> ${herb.name}<br>`;
        herbListDiv.appendChild(label);
      });
    }

    function simulateAlchemy() {
      const selectedHerbs = Array.from(document.querySelectorAll('.herb-select:checked')).map(el => el.value);
      const fireType = document.getElementById("fireType").value;

      if (selectedHerbs.length === 0) {
        document.getElementById("result").innerText = "è«‹é¸æ“‡è‡³å°‘ä¸€å‘³è—¥æã€‚";
        return;
      }

      let resultText = `ä½ ä½¿ç”¨äº†ã€Œ${selectedHerbs.join('ã€')}ã€ï¼Œä»¥ã€Œ${fireType}ã€ç…‰ä¸¹â€¦â€¦\n`;
      const successRate = Math.floor(Math.random() * 100);

      if (successRate > 50) {
        resultText += `âœ… æˆåŠŸï¼ä½ ç…‰å‡ºäº†ä¸€é‹çœ‹èµ·ä¾†å¾ˆä¸éŒ¯çš„ä¸¹è—¥ï¼ï¼ˆæˆåŠŸç‡ ${successRate}%ï¼‰`;
      } else {
        resultText += `âŒ ç…‰ä¸¹å¤±æ•—ï¼Œè—¥æç‡’ç„¦äº†â€¦â€¦ï¼ˆæˆåŠŸç‡ ${successRate}%ï¼‰`;
      }

      document.getElementById("result").innerText = resultText;
    }

    loadHerbs();

    // ğŸµ YouTube èƒŒæ™¯éŸ³æ¨‚æ’­æ”¾å™¨é‚è¼¯
    let player;
    let isPlaying = true;

    function onYouTubeIframeAPIReady() {
      player = new YT.Player('player', {
        videoId: 'H0nBhA27oDM', // â† æ”¹æˆä½ æƒ³ç”¨çš„ YouTube å½±ç‰‡ ID
        playerVars: {
          autoplay: 1,
          loop: 1,
          playlist: 'H0nBhA27oDM',
          controls: 0,
          showinfo: 0,
          modestbranding: 1,
          rel: 0
        },
        events: {
          'onReady': function (event) {
            event.target.mute(); // ç‚ºäº†è‡ªå‹•æ’­æ”¾ï¼Œé è¨­éœéŸ³
            event.target.playVideo();
          }
        }
      });
    }

    document.getElementById("musicControl").addEventListener("click", function () {
      if (isPlaying) {
        player.pauseVideo();
        this.innerText = "â–¶ï¸ æ’­æ”¾èƒŒæ™¯éŸ³æ¨‚";
      } else {
        player.playVideo();
        this.innerText = "â¸ æš«åœèƒŒæ™¯éŸ³æ¨‚";
      }
      isPlaying = !isPlaying;
    });
 <!-- YouTube æ’­æ”¾å™¨ API -->
<script src="https://youtu.be/H0nBhA27oDM"></script>

<!-- ä½ çš„ä¸»é‚è¼¯è…³æœ¬ -->
<script src="scripts/scripts.js" defer></script>
</body>
</html>


